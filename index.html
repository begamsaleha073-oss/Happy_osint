<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>LeakOSINT Cyber Search</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #02060a;
  --panel: #0b0f15;
  --neon1: #00f0ff;
  --neon2: #ff2fe6;
  --text: #cfdbe8;
  --muted: #8ea0b2;
}
*{box-sizing:border-box}
body {
  background: radial-gradient(circle at 20% 20%, rgba(0,255,255,0.05), transparent),
              radial-gradient(circle at 80% 80%, rgba(255,0,255,0.05), transparent),
              var(--bg);
  font-family: "Share Tech Mono", monospace;
  color: var(--text);
  margin: 0;
  padding: 1.2rem;
  min-height: 100vh;
  overflow-x: hidden;
}
.container {
  max-width: 920px;
  margin: auto;
  background: var(--panel);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  padding: 1.6rem;
  box-shadow: 0 0 40px rgba(0,240,255,0.06);
}
.header-row {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-bottom:10px;
}
h1 {
  color: var(--neon1);
  text-shadow: 0 0 10px var(--neon1);
  font-size:1.4rem;
  margin:0;
}
.badge {
  font-size:12px;
  padding:6px 10px;
  border-radius:8px;
  background: linear-gradient(90deg,var(--neon1),var(--neon2));
  color:#000;
  font-weight:600;
}
form {
  display: flex;
  gap: 10px;
  margin-bottom: 14px;
}
input {
  flex: 1;
  background: #050b10;
  border: 1px solid rgba(0,240,255,0.14);
  color: var(--text);
  border-radius: 10px;
  padding: 12px;
  font-size: 15px;
  outline: none;
  transition: border 0.18s;
}
input:focus {
  border-color: var(--neon2);
  box-shadow: 0 0 8px rgba(255,47,230,0.12);
}
button {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  border: none;
  border-radius: 10px;
  padding: 12px 16px;
  color: #000;
  font-weight: 700;
  cursor: pointer;
  transition: 0.12s;
}
button[disabled]{
  opacity:0.6;
  cursor:not-allowed;
  transform:none;
}
.results { margin-top: 18px; }
.card {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 10px;
  padding: 12px;
  margin-bottom: 12px;
  word-break: break-word;
}
.card h3 { color: var(--neon2); margin:0 0 8px 0; font-size:1rem; }
.card p.info { margin:0 0 8px 0; color:var(--muted); font-size:0.95rem; }
.pre-block {
  background: rgba(0,0,0,0.28);
  padding:8px;
  border-radius:8px;
  overflow:auto;
  font-size:0.84rem;
  line-height:1.3;
  white-space:pre-wrap;
}
.disclaimer-small {
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
  text-align:center;
}
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,0.6); display:grid; place-items:center; z-index:9999;
}
.modal {
  width: min(720px, 94%);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px;
  padding:18px;
  border:1px solid rgba(255,255,255,0.04);
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
}
.modal h2 { margin:0 0 8px 0; color:var(--neon1); font-size:1.05rem; }
.modal p { color:var(--text); margin:8px 0; font-size:0.95rem; }
.modal .actions { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
@media (max-width:720px){
  form { flex-direction: column; }
  input, button { width:100%; font-size:16px; }
  .modal { padding:14px; }
  h1 { font-size:1.15rem; }
  .container { padding:1rem; }
}
</style>
</head>
<body>
  <div class="container" role="main">
    <div class="header-row">
      <h1>⚡ LeakOSINT Cyber Search</h1>
      <div class="badge">Happy • Education & Investigation</div>
    </div>
    <form id="searchForm">
      <input type="text" id="query" name="query" placeholder="Enter email, username, or phone..." autocomplete="off" required />
      <button id="searchBtn" type="submit" disabled>Search</button>
    </form>
    <div id="status" aria-live="polite"></div>
    <div class="results" id="results" aria-live="polite"></div>
    <div class="disclaimer-small">
      This tool was created by <strong>Happy</strong> for educational and investigative purposes only. Misuse is prohibited.
    </div>
  </div>
  <div id="disclaimerModal" class="modal-backdrop" aria-modal="true" role="dialog">
    <div class="modal" role="document">
      <h2>Important — Usage & Responsibility</h2>
      <p>
        This tool was created by <strong>Happy</strong> and is provided <strong>for educational and investigative purposes only</strong>.
        Unauthorized or malicious use is strictly prohibited.
      </p>
      <div class="actions">
        <button id="declineBtn" class="ghost" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px">Decline</button>
        <button id="acceptBtn" style="padding:8px 12px;border-radius:8px;background:linear-gradient(90deg,var(--neon1),var(--neon2));border:none;font-weight:700">I understand and agree</button>
      </div>
    </div>
  </div>
<script>
const modal = document.getElementById('disclaimerModal');
const acceptBtn = document.getElementById('acceptBtn');
const declineBtn = document.getElementById('declineBtn');
const searchBtn = document.getElementById('searchBtn');
acceptBtn.addEventListener('click', () => {
  modal.style.display = 'none';
  searchBtn.removeAttribute('disabled');
  localStorage.setItem('leakosint_disclaimer_accepted', '1');
});
declineBtn.addEventListener('click', () => {
  modal.style.display = 'none';
  document.getElementById('status').innerHTML = '<p style="color:#ff8b8b">You declined the terms — searching disabled.</p>';
  searchBtn.setAttribute('disabled', '1');
  localStorage.removeItem('leakosint_disclaimer_accepted');
});
if(localStorage.getItem('leakosint_disclaimer_accepted') === '1'){
  modal.style.display = 'none';
  searchBtn.removeAttribute('disabled');
}
const form = document.getElementById('searchForm');
const resultsDiv = document.getElementById('results');
const statusDiv = document.getElementById('status');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  if(localStorage.getItem('leakosint_disclaimer_accepted') !== '1'){
    alert('Please accept the usage terms first.');
    return;
  }
  const q = document.getElementById('query').value.trim();
  if(!q) return;
  resultsDiv.innerHTML = '';
  statusDiv.innerHTML = '<p>⏳ Searching...</p>';
  searchBtn.setAttribute('disabled','1');
  try {
    const resp = await fetch('/api/search', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ query: q })
    });
    if(!resp.ok){
      const text = await resp.text();
      resultsDiv.innerHTML = `<div class="card"><p class="info">Server error: ${resp.status} ${resp.statusText}</p><pre class="pre-block">${escapeHtml(text)}</pre></div>`;
      statusDiv.innerHTML = '';
      searchBtn.removeAttribute('disabled');
      return;
    }
    const data = await resp.json();
    statusDiv.innerHTML = '';
    if(data.error){
      resultsDiv.innerHTML = `<div class="card"><p class="info" style="color:#ff8b8b">${escapeHtml(data.error)}</p></div>`;
      searchBtn.removeAttribute('disabled');
      return;
    }
    if(!data.List || Object.keys(data.List).length === 0){
      resultsDiv.innerHTML = `<div class="card"><p class="info">No results found.</p></div>`;
      searchBtn.removeAttribute('disabled');
      return;
    }
    for(const [dbName, dbInfo] of Object.entries(data.List)){
      const c = document.createElement('div');
      c.className = 'card';
      const infoText = dbInfo.InfoLeak || '';
      c.innerHTML = `<h3>${escapeHtml(dbName)}</h3><p class="info">${escapeHtml(infoText)}</p>`;
      if(dbName !== 'No results found' && Array.isArray(dbInfo.Data)){
        for(const row of dbInfo.Data){
          const block = document.createElement('div');
          block.className = 'pre-block';
          block.textContent = JSON.stringify(row, null, 2);
          c.appendChild(block);
        }
      }
      resultsDiv.appendChild(c);
    }
  } catch (err){
    statusDiv.innerHTML = `<p style="color:#ff8b8b">Network error: ${escapeHtml(err.message)}</p>`;
  } finally {
    searchBtn.removeAttribute('disabled');
  }
});
function escapeHtml(s){
  return String(s).replace(/[&<>"'`=\/]/g, function(c){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'"':'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'}[c]; });
}
</script>
</body>
</html>